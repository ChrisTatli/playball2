<div ng-controller="SearchCtrl">
    <div class="row">
        <div class="col s3">
            <div class="card-panel">
                <span>
        <ul class="section table-of-contents">
          <li ng-show="isLoggedIn"><a href="#!/add_event">Create game</a></li>
          <li><a ng-click="loadAll()">All Games</a></li>
          <li><a ng-click="filter('my')">My Games</a></li>

        </ul>
      </span>
    </div>
    </div>

    <div class="col s9">
      <div class="row card-panel">
        <div class="input-field">
          <input id="search" ng-model="query" ng-model-options="{ updateOn: 'blur' }" type="text">
          <label for="search">Search</label>
        </div>
      </div>

      <ul id="search-results">
          <li ng-repeat="event in results">
              <div class="card hoverable">
                  <div class="card-image waves-effect waves-block waves-light">
                      <img class="activator" ng-src="{{event.img_url}}">
                  </div>
                  <div class="card-content">
                      <span class="card-title activator grey-text text-darken-4">{{event.title}}<i class="material-icons right">more_vert</i></span>
                  </div>
                  <div class="card-reveal">
                      <div class="card-title grey-text text-darken-4">
                         <i class="material-icons right">close</i>
                         <h4>{{event.title}} - {{event.start | date : "medium"}}</h4>
                         <button ng-click="signupEvent(event)" class="waves-effect waves-green btn-flat">Participate!</button>
                      </div>
                      <div class="section">
                         <ul class="collapsible" data-collapsible="accordion">
                             <li>
                                 <div class="collapsible-header"><i class="material-icons">location_on</i>{{event.address}}</div>
                             </li>
                             <li>
                                 <div class="collapsible-header"><i class="material-icons">person</i>Max participants: {{event.numParticipants}}</div>
                             </li>
                             <li>
                                 <div class="collapsible-header"><i class="material-icons">description</i>{{event.description}}</div>
                             </li>
                        </ul>
                        <div class="chip" ng-repeat="p in event.participants">
                          <img ng-src="{{p.img_url}}" alt="Contact Person">
                          {{p.firstname}}
                          <i class="material-icons" ng-show="p._id == currentUser._id" ng-click="cancelSignup(event)">close</i>
                        </div>
                      </div>
                  </div>
              </div>
          </li>
      </ul>

      <div class="row">
          <ul class="center-align pagination">
              <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
              <li class="active"><a href="#!">1</a></li>
              <li class="waves-effect"><a href="#!">2</a></li>
              <li class="waves-effect"><a href="#!">3</a></li>
              <li class="waves-effect"><a href="#!">4</a></li>
              <li class="waves-effect"><a href="#!">5</a></li>
              <li class="waves-effect"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
          </ul>
      </div>
    </div>
</div>
